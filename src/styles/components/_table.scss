@use '../abstracts' as dc;

.dc-table-container {
  position: relative;
  overflow-x: auto;
  border-top: var(--dc-table-border);
  border-bottom: var(--dc-table-border);
  -webkit-overflow-scrolling: touch;

  &:focus {
    outline: none;
    @include dc.focus-ring;
  }
}

.dc-table {
  font-family: var(--dc-font-base);
  font-size: dc.$font-size-sm;
  font-weight: dc.$font-weight-normal;
  font-variant-numeric: tabular-nums;
  width: 100%;
  height: auto;
  border-spacing: 0;
  border-collapse: separate;
}

.dc-table-head {
}

.dc-table-body {
}

.dc-table-tr {
}

.dc-table-row {
}

.dc-table-cell {
  padding: dc.px-to-rem(10px);
  border-bottom: var(--dc-table-border);
  background: var(--dc-table-cell-bg);

  .dc-table-head & {
    font-size: 90%;
    padding-top: dc.px-to-rem(8px);
    padding-bottom: dc.px-to-rem(8px);
    white-space: nowrap;
  }

  .dc-table_padding_lg & {
    padding: dc.px-to-rem(14px);
  }

  .dc-table_padding_lg .dc-table-head & {
    padding-top: dc.px-to-rem(12px);
    padding-bottom: dc.px-to-rem(12px);
  }

  .dc-table_padding_sm & {
    padding: dc.px-to-rem(8px);
  }
}

.dc-table-cell_header {
  font-weight: dc.$font-weight-medium;
  background: var(--dc-table-header-cell-bg);
}

.dc-table-cell__body {
  display: inline-flex;
  align-items: center;
}

.dc-table-cell__sort-btn {
  margin-right: dc.$gap-2x;
}

.dc-table-sort-btn .dc-btn__text {
  @include dc.visually-hidden;
}

.dc-table_sticky-header > .dc-table-head > .dc-table-row > .dc-table-cell {
  position: sticky;
  z-index: 1;
  top: 0;
}

.dc-table-body > .dc-table-row:last-child > .dc-table-cell {
  border-bottom: none;
}

.dc-table_bordered .dc-table-cell + .dc-table-cell {
  border-left: var(--dc-table-border);
}

// noinspection CssMissingComma
.dc-table_striped
  > .dc-table-body
  > .dc-table-row:nth-child(2n)
  > .dc-table-cell {
  background: var(--dc-table-striped-row-bg);
}

//noinspection CssMissingComma
.dc-table.dc-table_row_highlighted:not(.dc-table_loading)
  > .dc-table-body
  > .dc-table-row:hover
  > .dc-table-cell {
  background: var(--dc-table-hover-row-bg);
}

.dc-table-row_selected > .dc-table-cell {
  background: var(--dc-table-selected-row-bg);
}

// noinspection CssMissingComma
.dc-table_striped
  > .dc-table-body
  > .dc-table-row_selected:nth-child(2n)
  > .dc-table-cell {
  background: var(--dc-table-selected-stiped-row-bg);
}

.dc-table_loading > .dc-table-body .dc-table-cell,
.dc-table-cell_loading {
  position: relative;
  color: transparent;

  & > * {
    visibility: hidden;
  }

  $shine-width: 5rem;

  @keyframes shine {
    0% {
      background-position: -$shine-width;
    }
    75%,
    100% {
      background-position: calc(100% + #{$shine-width}) 0;
    }
  }

  &::after {
    position: absolute;
    top: calc(50% - 0.5rem);
    left: 8%;
    width: 84%;
    height: 1rem;
    max-height: 100%;
    content: '';
    animation: shine 2s infinite linear;
    border-radius: dc.$border-radius-2xs;
    background-color: var(--dc-skeleton-bg-color);
    background-image: linear-gradient(
      90deg,
      var(--dc-skeleton-bg-color) 0%,
      var(--dc-skeleton-color) 50%,
      var(--dc-skeleton-bg-color) 100%
    );
    background-repeat: no-repeat;
    background-position: -$shine-width 0;
    background-size: $shine-width 100%;
  }
}
